<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
    <!-- ========================================================= -->
    <!-- ======================== Defaults ======================= -->
    <!-- ========================================================= -->
    <title>Entity of an Apache OFBiz Component</title>
    <description>None</description>
    <version>1.0</version>

	  <!-- ========================================================= -->
  <!-- ======================== Data Model ===================== -->
  <!-- The modules in this file are as follows:                  -->
  <!--  - org.apache.ofbiz.entity.group -->
  <!--  - org.apache.ofbiz.entity.synchronization -->
  <!--  - org.apache.ofbiz.entity.tenant -->
  <!-- ========================================================= -->

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.common.enum -->
  <!-- ========================================================= -->

    <entity entity-name="Enumeration"
            package-name="org.apache.ofbiz.common.enum"
            default-resource-name="CommonEntityLabels"
            title="Enumeration Entity">
      <field name="enumId" type="id-ne"></field>
      <field name="enumTypeId" type="id-ne"></field>
      <field name="enumCode" type="short-varchar"></field>
      <field name="sequenceId" type="id"></field>
      <field name="description" type="description"></field>
      <prim-key field="enumId"/>
      <relation type="one" fk-name="ENUM_TO_TYPE" rel-entity-name="EnumerationType">
        <key-map field-name="enumTypeId"/>
      </relation>
    </entity>
    <entity entity-name="EnumerationType"
            package-name="org.apache.ofbiz.common.enum"
            default-resource-name="CommonEntityLabels"
            title="Enumeration Type Entity">
      <field name="enumTypeId" type="id-ne"></field>
      <field name="parentTypeId" type="id"></field>
      <field name="hasTable" type="indicator"></field>
      <field name="description" type="description"></field>
      <prim-key field="enumTypeId"/>
      <relation type="one" fk-name="ENUM_TYPE_PARENT" title="Parent" rel-entity-name="EnumerationType">
        <key-map field-name="parentTypeId" rel-field-name="enumTypeId"/>
      </relation>
    </entity>

    <view-entity entity-name="EnumTypeChildAndEnum" package-name="org.apache.ofbiz.common.enum">
        <member-entity entity-alias="PARENT" entity-name="EnumerationType"/>
        <member-entity entity-alias="CHILD" entity-name="EnumerationType"/>
        <member-entity entity-alias="ENUM" entity-name="Enumeration"/>
        <alias-all entity-alias="PARENT" prefix="parent"/>
        <alias-all entity-alias="CHILD" prefix="child">
            <exclude field="parentTypeId"/>
        </alias-all>
        <alias-all entity-alias="ENUM"/>
        <view-link entity-alias="PARENT" rel-entity-alias="CHILD">
            <key-map field-name="enumTypeId" rel-field-name="parentTypeId"/>
        </view-link>
        <view-link entity-alias="CHILD" rel-entity-alias="ENUM">
            <key-map field-name="enumTypeId"/>
        </view-link>
    </view-entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.common.status -->
  <!-- ========================================================= -->

    <entity entity-name="StatusItem"
            package-name="org.apache.ofbiz.common.status"
            default-resource-name="CommonEntityLabels"
            title="Status Entity">
      <field name="statusId" type="id-ne"></field>
      <field name="statusTypeId" type="id-ne"></field>
      <field name="statusCode" type="short-varchar"></field>
      <field name="sequenceId" type="id"></field>
      <field name="description" type="description"></field>
      <prim-key field="statusId"/>
      <relation type="one" fk-name="STATUS_TO_TYPE" rel-entity-name="StatusType">
        <key-map field-name="statusTypeId"/>
      </relation>
    </entity>
    <entity entity-name="StatusType"
            package-name="org.apache.ofbiz.common.status"
            default-resource-name="CommonEntityLabels"
            title="Status Type Entity">
      <field name="statusTypeId" type="id-ne"></field>
      <field name="parentTypeId" type="id"></field>
      <field name="hasTable" type="indicator"></field>
      <field name="description" type="description"></field>
      <prim-key field="statusTypeId"/>
      <relation type="one" fk-name="STATUS_TYPE_PARENT" title="Parent" rel-entity-name="StatusType">
        <key-map field-name="parentTypeId" rel-field-name="statusTypeId"/>
      </relation>
    </entity>
    <entity entity-name="StatusValidChange"
            package-name="org.apache.ofbiz.common.status"
            default-resource-name="CommonEntityLabels"
            title="Status Valid Change Entity">
      <field name="statusId" type="id-ne"></field>
      <field name="statusIdTo" type="id-ne"></field>
      <field name="conditionExpression" type="long-varchar"></field>
      <field name="transitionName" type="name"></field>
      <prim-key field="statusId"/>
      <prim-key field="statusIdTo"/>
      <relation type="one" fk-name="STATUS_CHG_MAIN" title="Main" rel-entity-name="StatusItem">
        <key-map field-name="statusId"/>
      </relation>
      <relation type="one" fk-name="STATUS_CHG_TO" title="To" rel-entity-name="StatusItem">
        <key-map field-name="statusIdTo" rel-field-name="statusId"/>
      </relation>
    </entity>
    <view-entity entity-name="StatusValidChangeToDetail"
        package-name="org.apache.ofbiz.common.status"
        title="Status Valid Change To Detail View Entity">
        <member-entity entity-alias="SVC" entity-name="StatusValidChange"/>
        <member-entity entity-alias="SI" entity-name="StatusItem"/>
        <alias-all entity-alias="SVC"/>
        <alias-all entity-alias="SI"/>
        <view-link entity-alias="SVC" rel-entity-alias="SI">
            <key-map field-name="statusIdTo" rel-field-name="statusId"/>
        </view-link>
        <relation type="one" rel-entity-name="StatusValidChange">
            <key-map field-name="statusId"/>
            <key-map field-name="statusIdTo"/>
        </relation>
        <relation type="one" rel-entity-name="StatusItem">
            <key-map field-name="statusId"/>
        </relation>
        <entity-condition>
            <order-by field-name="sequenceId"/>
        </entity-condition>
    </view-entity>

	    <!-- ============================ -->
    <!-- org.apache.ofbiz.common.theme -->
    <!-- ============================ -->

    <entity entity-name="VisualThemeSet"
            package-name="org.apache.ofbiz.common.theme"
            title="Defines a set of Visual Themes">
      <description>Groups toghether Visual Themes that can be used for one (or a set of) application.</description>
      <field name="visualThemeSetId" type="id-ne"></field>
      <field name="description" type="description"></field>
      <prim-key field="visualThemeSetId"/>
    </entity>

    <entity entity-name="VisualTheme"
            package-name="org.apache.ofbiz.common.theme"
            default-resource-name="CommonEntityLabels"
            title="Defines a Visual Theme">
      <description>The VisualTheme entity contains one entry per visual theme.</description>
      <field name="visualThemeId" type="id-ne"></field>
      <field name="visualThemeSetId" type="id"></field>
      <field name="description" type="description"></field>
      <prim-key field="visualThemeId"/>
      <relation type="one" fk-name="VT_THEME_SET" rel-entity-name="VisualThemeSet">
        <key-map field-name="visualThemeSetId"/>
      </relation>
    </entity>

    <entity entity-name="VisualThemeResource"
            package-name="org.apache.ofbiz.common.theme"
            title="Contains All Visual Theme Resources">
      <description>The VisualThemeResource entity contains visual theme
          resources. Each visual theme can have any number of resources.</description>
      <field name="visualThemeId" type="id-ne"></field>
      <field name="resourceTypeEnumId" type="id-ne"></field>
      <field name="sequenceId" type="id-ne"><description>Controls the loading order of duplicate resource types</description></field>
      <field name="resourceValue" type="value"><description>Contains the resource value</description></field>
      <prim-key field="visualThemeId"/>
      <prim-key field="resourceTypeEnumId"/>
      <prim-key field="sequenceId"/>
      <relation type="one" fk-name="VT_RES_THEME" rel-entity-name="VisualTheme">
          <key-map field-name="visualThemeId"/>
      </relation>
      <relation type="one" fk-name="VT_RES_TYPE_ENUM" rel-entity-name="Enumeration">
          <key-map field-name="resourceTypeEnumId" rel-field-name="enumId"/>
      </relation>
    </entity>

    <!-- ============================ -->
    <!-- org.apache.ofbiz.common.portal -->
    <!-- ============================ -->

    <entity entity-name="PortalPortlet" package-name="org.apache.ofbiz.common.portal" title="Defines a Portlet to be used in Portals">
        <field name="portalPortletId" type="id-ne"></field>
        <field name="portletName" type="name"></field>
        <field name="screenName" type="long-varchar"></field>
        <field name="screenLocation" type="long-varchar"></field>
        <field name="editFormName" type="long-varchar"></field>
        <field name="editFormLocation" type="long-varchar"></field>
        <field name="description" type="description"></field>
        <field name="screenshot" type="url"></field>
        <field name="securityServiceName" type="long-varchar"><description>The service named here is used to see if current user can see the portlet on the list of available portlets; the screen that the portlet calls should also call this service to check permission and not render; the service named here must implement the "permissionInterface" service just like services used for service permissions</description></field>
        <field name="securityMainAction" type="short-varchar"><description>The main action which can be done with this portlet, possible values: CREATE UPDATE VIEW DELETE</description></field>
        <prim-key field="portalPortletId"/>
    </entity>
    <entity entity-name="PortletCategory" package-name="org.apache.ofbiz.common.portal" title="Portlet Category Entity">
      <field name="portletCategoryId" type="id-ne"/>
      <field name="description" type="description"/>
      <prim-key field="portletCategoryId"/>
    </entity>
    <entity entity-name="PortletPortletCategory" package-name="org.apache.ofbiz.common.portal" title="Defines Portlets included into Categories">
      <field name="portalPortletId" type="id-ne"/>
      <field name="portletCategoryId" type="id-ne"/>
      <prim-key field="portalPortletId"/>
      <prim-key field="portletCategoryId"/>
      <relation type="one" fk-name="PPTLTCAT_PTPL" rel-entity-name="PortalPortlet">
        <key-map field-name="portalPortletId"/>
      </relation>
      <relation type="one" fk-name="PPTLTCAT_PTLTCAT" rel-entity-name="PortletCategory">
        <key-map field-name="portletCategoryId"/>
      </relation>
    </entity>
    <entity entity-name="PortalPage" package-name="org.apache.ofbiz.common.portal" title="Defines a Portal Page"
        default-resource-name="CommonPortalEntityLabels">
        <field name="portalPageId" type="id-ne"></field>
        <field name="portalPageName" type="name"></field>
        <field name="description" type="description"></field>
        <!-- defined in an extend in content component to avoid dependencies between common and content
        <field name="helpContentId" type="id"><description>Used to give contentId which will be shown when help on this page will be called</description></field>
         -->
        <field name="ownerUserLoginId" type="id-vlong-ne"></field>
        <field name="originalPortalPageId" type="id"><description>The system portal page this page is derived from</description></field>
        <field name="parentPortalPageId" type="id"><description>the parent this page is belonging to, normally the startpage of the portal page group</description></field>
        <field name="sequenceNum" type="numeric"></field>
        <field name="securityGroupId" type="id"></field>
        <prim-key field="portalPageId"/>
        <!-- defined in an extend in content component to avoid dependencies between common and content
        <relation type="one" fk-name="PORTPAL_HELP_CONTENT" rel-entity-name="Content">
          <key-map field-name="helpContentId" rel-field-name="contentId"/>
        </relation>
        -->
        <relation type="one" fk-name="PortPage_PARENT" title="Parent" rel-entity-name="PortalPage">
          <key-map field-name="parentPortalPageId" rel-field-name="portalPageId"/>
        </relation>
        <relation type="one" fk-name="PORTPAGE_SECGRP" rel-entity-name="SecurityGroup">
          <key-map field-name="securityGroupId" rel-field-name="groupId"/>
        </relation>
    </entity>
  <view-entity entity-name="PortalPageAndUserLogin" package-name="org.apache.ofbiz.common.portal"
    title="PortalPage accessible via security group to a userLogin">
    <member-entity entity-alias="PP" entity-name="PortalPage"/>
    <member-entity entity-alias="UG" entity-name="UserLoginSecurityGroup"/>
    <alias entity-alias="PP" name="portalPageId"/>
    <alias entity-alias="PP" name="securityGroupId"/>
    <alias entity-alias="PP" name="parentPortalPageId"/>
    <alias entity-alias="UG" name="userLoginId"/>
    <alias entity-alias="UG" name="fromDate"/>
    <alias entity-alias="UG" name="thruDate"/>
    <view-link entity-alias="PP" rel-entity-alias="UG">
      <key-map field-name="securityGroupId" rel-field-name="groupId"/>
    </view-link>
  </view-entity>
  <entity entity-name="PortalPageColumn" package-name="org.apache.ofbiz.common.portal" title="Defines a Portal Page">
        <field name="portalPageId" type="id-ne"></field>
        <field name="columnSeqId" type="id-ne"></field>
        <field name="columnWidthPixels" type="numeric"></field>
        <field name="columnWidthPercentage" type="numeric"></field>
        <prim-key field="portalPageId"/>
        <prim-key field="columnSeqId"/>
        <relation type="one" fk-name="PRTL_PGCOL_PAGE" rel-entity-name="PortalPage">
            <key-map field-name="portalPageId"/>
        </relation>
    </entity>
    <entity entity-name="PortalPagePortlet" package-name="org.apache.ofbiz.common.portal" title="Defines Portlets included into Portal Pages">
        <field name="portalPageId" type="id-ne"></field>
        <field name="portalPortletId" type="id-ne"></field>
        <field name="portletSeqId" type="id-ne"><description>Identify the portalPortlet instance in case more copy of the same portalPortlet are present in the same portalPage</description></field>
        <field name="columnSeqId" type="id-ne"></field>
        <field name="sequenceNum" type="numeric"></field>
        <prim-key field="portalPageId"/>
        <prim-key field="portalPortletId"/>
        <prim-key field="portletSeqId"/>
        <relation type="one" fk-name="PRTL_PGPTLT_PAGE" rel-entity-name="PortalPage">
            <key-map field-name="portalPageId"/>
        </relation>
        <relation type="one" fk-name="PRTL_PGPTLT_PTLT" rel-entity-name="PortalPortlet">
            <key-map field-name="portalPortletId"/>
        </relation>
        <relation type="one-nofk" rel-entity-name="PortalPageColumn">
            <key-map field-name="portalPageId"/>
            <key-map field-name="columnSeqId"/>
        </relation>
    </entity>
    <view-entity entity-name="PortalPagePortletView" package-name="org.apache.ofbiz.common.portal" title="View entity to have all Portlet information with portalPageId ">
        <member-entity entity-alias="PPGPTLT" entity-name="PortalPagePortlet"/>
        <member-entity entity-alias="PTLT" entity-name="PortalPortlet"/>
        <alias-all entity-alias="PPGPTLT"/>
        <alias-all entity-alias="PTLT"/>
        <view-link entity-alias="PPGPTLT" rel-entity-alias="PTLT">
            <key-map field-name="portalPortletId"/>
        </view-link>
    </view-entity>
    <entity entity-name="PortletAttribute" package-name="org.apache.ofbiz.common.portal" title="Allows to set different attribute values for each instance of the same portlet">
        <field name="portalPageId" type="id-ne"></field>
        <field name="portalPortletId" type="id-ne"></field>
        <field name="portletSeqId" type="id-ne"></field>
        <field name="attrName" type="id-long-ne"></field>
        <field name="attrValue" type="value"></field>
        <field name="attrDescription" type="description"></field>
        <field name="attrType" type="value"></field>
        <prim-key field="portalPageId"/>
        <prim-key field="portalPortletId"/>
        <prim-key field="portletSeqId"/>
        <prim-key field="attrName"/>
        <relation type="one" fk-name="PTLT_ATTR_PTLT" rel-entity-name="PortalPortlet">
            <key-map field-name="portalPortletId"/>
        </relation>
    </entity>

    <view-entity entity-name="PortalPageAndPortlet" package-name="org.apache.ofbiz.common.portal" title="View entity to have all Portal and Portlet information">
        <member-entity entity-alias="PP" entity-name="PortalPage"/>
        <member-entity entity-alias="PPP" entity-name="PortalPagePortlet"/>
        <alias-all entity-alias="PP"/>
        <alias-all entity-alias="PPP">
            <exclude field="sequenceNum"/>
        </alias-all>
        <alias field="sequenceNum" entity-alias="PPP" name="portletSequenceNum"/>
        <view-link entity-alias="PP" rel-entity-alias="PPP">
            <key-map field-name="portalPageId"/>
        </view-link>
    </view-entity>

    <!-- ============================ -->
    <!-- org.apache.ofbiz.common.property -->
    <!-- ============================ -->
    
    <entity entity-name="SystemProperty" package-name="org.apache.ofbiz.common.property" title="Defines a System Property">
        <field name="systemResourceId" type="id-long-ne"></field>
        <field name="systemPropertyId" type="id-long-ne"></field>
        <field name="systemPropertyValue" type="value"></field>
        <field name="description" type="description"></field>
        <prim-key field="systemResourceId"/>
        <prim-key field="systemPropertyId"/>
    </entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.entity.group -->
  <!-- ========================================================= -->

    <entity entity-name="EntityGroup"
            package-name="org.apache.ofbiz.entity.group"
            title="Entity Grouping Entity">
      <field name="entityGroupId" type="id-ne"></field>
      <field name="entityGroupName" type="name"></field>
      <prim-key field="entityGroupId"/>
    </entity>
    <entity entity-name="EntityGroupEntry"
            package-name="org.apache.ofbiz.entity.group"
            title="Entity Grouping Entity">
      <field name="entityGroupId" type="id-ne"></field>
      <field name="entityOrPackage" type="long-varchar"></field>
      <field name="applEnumId" type="id-ne"></field>
      <prim-key field="entityGroupId"/>
      <prim-key field="entityOrPackage"/>
      <relation type="one" fk-name="ENTGRP_GRP" rel-entity-name="EntityGroup">
        <key-map field-name="entityGroupId"/>
      </relation>
    </entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.entity.synchronization -->
  <!-- ========================================================= -->

    <entity entity-name="EntitySync"
            package-name="org.apache.ofbiz.entity.synchronization"
            title="Entity Synchronization Entity">
      <field name="entitySyncId" type="id-ne"></field>
      <field name="runStatusId" type="id-ne"></field>
      <field name="lastSuccessfulSynchTime" type="date-time"></field>
      <field name="lastHistoryStartDate" type="date-time"></field>
      <field name="preOfflineSynchTime" type="date-time"></field>
      <field name="offlineSyncSplitMillis" type="numeric"></field>
      <field name="syncSplitMillis" type="numeric"></field>
      <field name="syncEndBufferMillis" type="numeric"></field>
      <field name="maxRunningNoUpdateMillis" type="numeric"></field>
      <field name="targetServiceName" type="long-varchar"></field>
      <field name="targetDelegatorName" type="long-varchar"></field>
      <field name="keepRemoveInfoHours" type="floating-point"></field>
      <field name="forPullOnly" type="indicator"></field>
      <field name="forPushOnly" type="indicator"></field>
      <prim-key field="entitySyncId"/>
      <relation type="many" rel-entity-name="EntitySyncInclGrpDetailView">
        <key-map field-name="entitySyncId"/>
      </relation>
      <relation type="one-nofk" title="Last" rel-entity-name="EntitySyncHistory">
        <key-map field-name="entitySyncId"/>
        <key-map field-name="lastHistoryStartDate" rel-field-name="startDate"/>
      </relation>
    </entity>
    <entity entity-name="EntitySyncHistory"
            package-name="org.apache.ofbiz.entity.synchronization"
            title="Entity Synchronization History Entity">
      <field name="entitySyncId" type="id-ne"></field>
      <field name="startDate" type="date-time"></field>
      <field name="runStatusId" type="id-ne"></field>
      <field name="beginningSynchTime" type="date-time"></field>
      <field name="lastSuccessfulSynchTime" type="date-time"></field>
      <field name="lastCandidateEndTime" type="date-time"></field>
      <field name="lastSplitStartTime" type="numeric"></field>
      <field name="toCreateInserted" type="numeric"></field>
      <field name="toCreateUpdated" type="numeric"></field>
      <field name="toCreateNotUpdated" type="numeric"></field>
      <field name="toStoreInserted" type="numeric"></field>
      <field name="toStoreUpdated" type="numeric"></field>
      <field name="toStoreNotUpdated" type="numeric"></field>
      <field name="toRemoveDeleted" type="numeric"></field>
      <field name="toRemoveAlreadyDeleted" type="numeric"></field>
      <field name="totalRowsExported" type="numeric"></field>
      <field name="totalRowsToCreate" type="numeric"></field>
      <field name="totalRowsToStore" type="numeric"></field>
      <field name="totalRowsToRemove" type="numeric"></field>
      <field name="totalSplits" type="numeric"></field>
      <field name="totalStoreCalls" type="numeric"></field>
      <field name="runningTimeMillis" type="numeric"></field>
      <field name="perSplitMinMillis" type="numeric"></field>
      <field name="perSplitMaxMillis" type="numeric"></field>
      <field name="perSplitMinItems" type="numeric"></field>
      <field name="perSplitMaxItems" type="numeric"></field>
      <prim-key field="entitySyncId"/>
      <prim-key field="startDate"/>
      <relation type="one" fk-name="ENTSYNC_HSTSNC" rel-entity-name="EntitySync">
        <key-map field-name="entitySyncId"/>
      </relation>
    </entity>
    <entity entity-name="EntitySyncInclude"
            package-name="org.apache.ofbiz.entity.synchronization"
            title="Entity Synchronization Include Entity">
      <field name="entitySyncId" type="id-ne"></field>
      <field name="entityOrPackage" type="long-varchar"></field>
      <field name="applEnumId" type="id-ne"></field>
      <prim-key field="entitySyncId"/>
      <prim-key field="entityOrPackage"/>
      <relation type="one" fk-name="ENTSYNC_INCSNC" rel-entity-name="EntitySync">
        <key-map field-name="entitySyncId"/>
      </relation>
    </entity>
    <entity entity-name="EntitySyncIncludeGroup"
            package-name="org.apache.ofbiz.entity.synchronization"
            title="Entity Synchronization Include Entity Group Entity">
      <field name="entitySyncId" type="id-ne"></field>
      <field name="entityGroupId" type="id-ne"></field>
      <prim-key field="entitySyncId"/>
      <prim-key field="entityGroupId"/>
      <relation type="one" fk-name="ENTSNCGU_GRP" rel-entity-name="EntityGroup">
        <key-map field-name="entityGroupId"/>
      </relation>
      <relation type="one" fk-name="ENTSNCGU_SNC" rel-entity-name="EntitySync">
        <key-map field-name="entitySyncId"/>
      </relation>
    </entity>
    <view-entity entity-name="EntitySyncInclGrpDetailView"
            package-name="org.apache.ofbiz.entity.synchronization"
            title="Entity Synchronization Include Entity Group Detail View Entity">
      <member-entity entity-alias="ESIG" entity-name="EntitySyncIncludeGroup"/>
      <member-entity entity-alias="EGE" entity-name="EntityGroupEntry"/>
      <alias-all entity-alias="ESIG"/>
      <alias-all entity-alias="EGE"/>
      <view-link entity-alias="ESIG" rel-entity-alias="EGE">
        <key-map field-name="entityGroupId"/>
      </view-link>
    </view-entity>
    <entity entity-name="EntitySyncRemove"
            package-name="org.apache.ofbiz.entity.synchronization"
            title="Entity Synchronization Remove Entity">
      <field name="entitySyncRemoveId" type="id-ne"></field>
      <field name="primaryKeyRemoved" type="very-long"></field>
      <prim-key field="entitySyncRemoveId"/>
    </entity>

  <!-- ========================================================= -->
  <!-- ======================== Data Model ===================== -->
  <!-- The modules in this file are as follows:                  -->
  <!--  - org.apache.ofbiz.security.cert                                -->
  <!--  - org.apache.ofbiz.security.login                               -->
  <!--  - org.apache.ofbiz.security.securitygroup                       -->
  <!-- ========================================================= -->

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.security.cert -->
  <!-- ========================================================= -->
    <entity entity-name="X509IssuerProvision"
            package-name="org.apache.ofbiz.security.cert"
            never-cache="true"
            title="Valid issuer data for authentication of x.509 certificates">
      <field name="certProvisionId" type="id-ne"></field>
      <field name="commonName" type="value"></field>
      <field name="organizationalUnit" type="value"></field>
      <field name="organizationName" type="value"></field>
      <field name="cityLocality" type="value"></field>
      <field name="stateProvince" type="value"></field>
      <field name="country" type="value"></field>
      <field name="serialNumber" type="value"></field>
      <prim-key field="certProvisionId"/>
    </entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.security.login -->
  <!-- ========================================================= -->

    <entity entity-name="UserLogin"
            package-name="org.apache.ofbiz.security.login"
            title="User Login Entity">
      <field name="userLoginId" type="id-vlong-ne"></field>
      <field name="currentPassword" type="short-varchar"></field>
      <field name="passwordHint" type="description"></field>
      <field name="isSystem" type="indicator"></field>
      <field name="enabled" type="indicator"></field>
      <field name="hasLoggedOut" type="indicator"></field>
      <field name="requirePasswordChange" type="indicator"></field>
      <field name="lastCurrencyUom" type="id"></field>
      <field name="lastLocale" type="very-short"></field>
      <field name="lastTimeZone" type="id-long"></field>
      <field name="disabledDateTime" type="date-time"></field>
      <field name="successiveFailedLogins" type="numeric"></field>
      <field name="externalAuthId" type="id-vlong-ne">
          <description>For use with external authentication; the userLdapDn should be replaced with this</description>
      </field>
      <field name="userLdapDn" type="id-vlong-ne">
          <description>The user's LDAP Distinguished Name - used for LDAP authentication</description>
      </field>
      <field name="disabledBy" type="id-vlong"></field>
      <prim-key field="userLoginId"/>
    </entity>
    <entity entity-name="UserLoginPasswordHistory"
            package-name="org.apache.ofbiz.security.login"
            never-cache="true"
            title="User Login Password History Entity">
      <field name="userLoginId" type="id-vlong-ne"></field>
      <field name="fromDate" type="date-time"></field>
      <field name="thruDate" type="date-time"></field>
      <field name="currentPassword" type="short-varchar"></field>
      <prim-key field="userLoginId"/>
      <prim-key field="fromDate"/>
      <relation type="one" fk-name="USER_LPH_USER" rel-entity-name="UserLogin">
        <key-map field-name="userLoginId"/>
      </relation>
    </entity>
    <entity entity-name="UserLoginHistory"
            package-name="org.apache.ofbiz.security.login"
            never-cache="true"
            title="User Login History Entity">
      <field name="userLoginId" type="id-vlong-ne"></field>
      <field name="visitId" type="id"></field>
      <field name="fromDate" type="date-time"></field>
      <field name="thruDate" type="date-time"></field>
      <field name="passwordUsed" type="long-varchar" encrypt="true"></field>
      <field name="successfulLogin" type="indicator"></field>
      <prim-key field="userLoginId"/>
      <prim-key field="fromDate"/>
      <relation type="one" fk-name="USER_LH_USER" rel-entity-name="UserLogin">
        <key-map field-name="userLoginId"/>
      </relation>
    </entity>
    <entity entity-name="UserLoginSession"
            package-name="org.apache.ofbiz.security.login"
            never-cache="true"
            title="User Login History Entity">
      <field name="userLoginId" type="id-vlong-ne"></field>
      <field name="savedDate" type="date-time"></field>
      <field name="sessionData" type="very-long"></field>
      <prim-key field="userLoginId"/>
      <relation type="one" fk-name="USER_SESSION_USER" rel-entity-name="UserLogin">
        <key-map field-name="userLoginId"/>
      </relation>
    </entity>
    
  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.security.securitygroup -->
  <!-- ========================================================= -->

    <entity entity-name="SecurityGroup"
            package-name="org.apache.ofbiz.security.securitygroup"
            default-resource-name="SecurityEntityLabels"
            title="Security Component - Security Group Entity">
      <field name="groupId" type="id-ne"></field>
      <field name="description" type="description"></field>
      <prim-key field="groupId"/>
    </entity>
    <entity entity-name="SecurityGroupPermission"
            package-name="org.apache.ofbiz.security.securitygroup"
            title="Security Component - Security Group Permission Entity">
      <description>Defines a permission available to a security group; there is no FK to SecurityPermission because we want to leave open the possibility of ad-hoc permissions, especially for the Entity Data Maintenance pages which have TONS of permissions</description>
      <field name="groupId" type="id-ne"></field>
      <field name="permissionId" type="id-long-ne"></field>
      <prim-key field="groupId"/>
      <prim-key field="permissionId"/>
      <relation type="one" fk-name="SEC_GRP_PERM_GRP" rel-entity-name="SecurityGroup">
        <key-map field-name="groupId"/>
      </relation>
      <relation type="one-nofk" rel-entity-name="SecurityPermission">
        <key-map field-name="permissionId"/>
      </relation>
    </entity>
    <entity entity-name="SecurityPermission"
            package-name="org.apache.ofbiz.security.securitygroup"
            default-resource-name="SecurityEntityLabels"
            title="Security Component - Security Permission Entity">
      <field name="permissionId" type="id-long-ne"></field>
      <field name="description" type="description"></field>
      <prim-key field="permissionId"/>
    </entity>
    <view-entity entity-name="UserLoginAndSecurityGroup"
          package-name="org.apache.ofbiz.security.securitygroup"
          never-cache="true"
          title="UserLogin And SecurityGroup View Entity">
      <member-entity entity-alias="ULSG" entity-name="UserLoginSecurityGroup"/>
      <member-entity entity-alias="UL" entity-name="UserLogin"/>
      <alias-all entity-alias="ULSG"/>
      <alias-all entity-alias="UL"/>
      <view-link entity-alias="ULSG" rel-entity-alias="UL">
        <key-map field-name="userLoginId"/>
      </view-link>
    </view-entity>
    <entity entity-name="UserLoginSecurityGroup"
            package-name="org.apache.ofbiz.security.securitygroup"
            title="Security Component - User Login Security Group Entity">
      <description>Maps a UserLogin to a security group</description>
      <field name="userLoginId" type="id-vlong-ne"></field>
      <field name="groupId" type="id-ne"></field>
      <field name="fromDate" type="date-time"></field>
      <field name="thruDate" type="date-time"></field>
      <prim-key field="userLoginId"/>
      <prim-key field="groupId"/>
      <prim-key field="fromDate"/>
      <relation type="one" fk-name="USER_SECGRP_USER" rel-entity-name="UserLogin">
        <key-map field-name="userLoginId"/>
      </relation>
      <relation type="one" fk-name="USER_SECGRP_GRP" rel-entity-name="SecurityGroup">
        <key-map field-name="groupId"/>
      </relation>
      <relation type="many" rel-entity-name="SecurityGroupPermission">
        <key-map field-name="groupId"/>
      </relation>
    </entity>
    <entity entity-name="ProtectedView"
          package-name="org.apache.ofbiz.security.securitygroup"
          title="Security Component - Protected View Entity">
      <description>Defines views protected from data leakage</description>
      <field name="groupId" type="id-ne"></field>
      <field name="viewNameId" type="id-long-ne"><description>name of view to protect from data theft</description></field>
      <field name="maxHits" type="numeric"><description>number of hits before tarpitting a login for a view</description></field>
      <field name="maxHitsDuration" type="numeric"><description>period of time associated with maxHits (in seconds)</description></field>
      <field name="tarpitDuration" type="numeric"><description>period of time a login will not be able to acces  this view again (in seconds)</description></field>
      <prim-key field="groupId"/>
      <prim-key field="viewNameId"/>
      <relation type="one" fk-name="VIEW_SECGRP_GRP" rel-entity-name="SecurityGroup">
        <key-map field-name="groupId"/>
      </relation>
      <relation type="many" rel-entity-name="SecurityGroupPermission">
        <key-map field-name="groupId"/>
      </relation>
    </entity>
    <view-entity entity-name="UserLoginAndProtectedView"
          package-name="org.apache.ofbiz.security.securitygroup"
          title="UserLogin And ProtectedView View Entity">
      <member-entity entity-alias="ULSGPV" entity-name="UserLoginSecurityGroup"/>
      <member-entity entity-alias="PV" entity-name="ProtectedView"/>
      <alias-all entity-alias="ULSGPV"/>
      <alias-all entity-alias="PV"/>
      <view-link entity-alias="ULSGPV" rel-entity-alias="PV">
        <key-map field-name="groupId"/>
      </view-link>
    </view-entity>
    <entity entity-name="TarpittedLoginView"
          package-name="org.apache.ofbiz.security.securitygroup"
          title="Security Component - Protected View Entity">
      <description>Login View couple currently tarpitted : any access to the view for the login is denied</description>
      <field name="viewNameId" type="id-long-ne"><description>name of view protected from data theft</description></field>
      <field name="userLoginId" type="id-vlong-ne"/>
      <field name="tarpitReleaseDateTime" type="numeric"><description>Date/Time at which the login will gain anew access to the view (in milliseconds from midnight, January 1, 1970 UTC , 0 meaning no tarpit to allow the admin to free a view and to keep history</description></field>
      <prim-key field="viewNameId"/>
      <prim-key field="userLoginId"/>
    </entity>
    <entity entity-name="UserLoginSecurityQuestion" package-name="org.apache.ofbiz.security.login">
      <field name="questionEnumId" type="id-ne" />
      <field name="userLoginId" type="id-vlong-ne" />
      <field name="securityAnswer" type="description" />
      <prim-key field="questionEnumId"/>
      <prim-key field="userLoginId"/>
      <relation rel-entity-name="Enumeration" type="one" fk-name="SECQ_ENUM">
        <key-map field-name="questionEnumId" rel-field-name="enumId"/>
      </relation>
      <relation rel-entity-name="UserLogin" type="one" fk-name="ULGNSECQ_ULGN">
        <key-map field-name="userLoginId"/>
      </relation>
    </entity>

  <!-- ========================================================= -->
  <!-- ======================== Data Model ===================== -->
  <!-- The modules in this file are as follows:                  -->
  <!--  - org.apache.ofbiz.service.schedule -->
  <!--  - org.apache.ofbiz.service.semaphore -->
  <!-- ========================================================= -->
  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.service.schedule -->
  <!-- ========================================================= -->

    <entity entity-name="JobSandbox" package-name="org.apache.ofbiz.service.schedule" title="Job Scheduler Sandbox Entity"
            sequence-bank-size="100" never-cache="true">
        <field name="jobId" type="id-ne"></field>
        <field name="jobName" type="name"></field>
        <field name="runTime" type="date-time"></field>
        <field name="poolId" type="name"></field>
        <field name="statusId" type="id"></field>
        <field name="parentJobId" type="id"></field>
        <field name="previousJobId" type="id"></field>
        <field name="serviceName" type="name"></field>
        <field name="loaderName" type="name"></field>
        <field name="maxRetry" type="numeric"></field>
        <field name="currentRetryCount" type="numeric"></field>
        <field name="authUserLoginId" type="id-vlong"></field>
        <field name="runAsUser" type="id-vlong"></field>
        <field name="runtimeDataId" type="id"></field>
        <field name="recurrenceInfoId" type="id"><description>Deprecated - use tempExprId instead</description></field>
        <field name="tempExprId" type="id"><description>Temporal expression id</description></field>
        <field name="currentRecurrenceCount" type="numeric"></field>
        <field name="maxRecurrenceCount" type="numeric"></field>
        <field name="runByInstanceId" type="id"></field>
        <field name="startDateTime" type="date-time"></field>
        <field name="finishDateTime" type="date-time"></field>
        <field name="cancelDateTime" type="date-time"></field>
        <field name="jobResult" type="value"></field>
        <prim-key field="jobId"/>
        <relation type="one" fk-name="JOB_SNDBX_RECINFO" rel-entity-name="RecurrenceInfo">
            <key-map field-name="recurrenceInfoId"/>
        </relation>
        <relation type="one" fk-name="JOB_SNDBX_TEMPEXPR" rel-entity-name="TemporalExpression">
            <key-map field-name="tempExprId"/>
        </relation>
        <relation type="one" fk-name="JOB_SNDBX_RNTMDTA" rel-entity-name="RuntimeData">
            <key-map field-name="runtimeDataId"/>
        </relation>
        <relation type="one" fk-name="JOB_SNDBX_AUSRLGN" title="Auth" rel-entity-name="UserLogin">
            <key-map field-name="authUserLoginId" rel-field-name="userLoginId"/>
        </relation>
        <relation type="one" fk-name="JOB_SNDBX_USRLGN" title="RunAs" rel-entity-name="UserLogin">
            <key-map field-name="runAsUser" rel-field-name="userLoginId"/>
        </relation>
        <relation type="one" fk-name="JOB_SNDBX_STTS" rel-entity-name="StatusItem">
            <key-map field-name="statusId"/>
        </relation>
        <index name="JOB_SNDBX_RUNSTAT">
            <index-field name="runByInstanceId"/>
            <index-field name="statusId"/>
        </index>
    </entity>
    <entity entity-name="RecurrenceInfo"
            package-name="org.apache.ofbiz.service.schedule"
            title="Recurrence Info Entity">
      <field name="recurrenceInfoId" type="id-ne"></field>
      <field name="startDateTime" type="date-time"></field>
      <field name="exceptionDateTimes" type="very-long"></field>
      <field name="recurrenceDateTimes" type="very-long"></field>
      <field name="exceptionRuleId" type="id-ne"></field>
      <field name="recurrenceRuleId" type="id-ne"></field>
      <field name="recurrenceCount" type="numeric"><description>Not recommended - more than one process could be using this RecurrenceInfo</description></field>
      <prim-key field="recurrenceInfoId"/>
      <relation type="one" fk-name="REC_INFO_RCRLE" rel-entity-name="RecurrenceRule">
        <key-map field-name="recurrenceRuleId"/>
      </relation>
      <relation type="one" fk-name="REC_INFO_EX_RCRLE" title="Exception" rel-entity-name="RecurrenceRule">
        <key-map field-name="exceptionRuleId" rel-field-name="recurrenceRuleId"/>
      </relation>
    </entity>
    <entity entity-name="RecurrenceRule"
            package-name="org.apache.ofbiz.service.schedule"
            title="Recurrence Rule Entity">
      <field name="recurrenceRuleId" type="id-ne"></field>
      <field name="frequency" type="short-varchar"></field>
      <field name="untilDateTime" type="date-time"></field>
      <field name="countNumber" type="numeric"></field>
      <field name="intervalNumber" type="numeric"></field>
      <field name="bySecondList" type="very-long"></field>
      <field name="byMinuteList" type="very-long"></field>
      <field name="byHourList" type="very-long"></field>
      <field name="byDayList" type="very-long"></field>
      <field name="byMonthDayList" type="very-long"></field>
      <field name="byYearDayList" type="very-long"></field>
      <field name="byWeekNoList" type="very-long"></field>
      <field name="byMonthList" type="very-long"></field>
      <field name="bySetPosList" type="very-long"></field>
      <field name="weekStart" type="short-varchar"></field>
      <field name="xName" type="very-long"></field>
      <prim-key field="recurrenceRuleId"/>
    </entity>
    <entity entity-name="RuntimeData" package-name="org.apache.ofbiz.service.schedule" title="Runtime Data Entity"
            sequence-bank-size="100">
        <field name="runtimeDataId" type="id-ne"></field>
        <field name="runtimeInfo" type="very-long"></field>
        <prim-key field="runtimeDataId"/>
    </entity>

    <!-- Note: TemporalExpression values should be treated as immutable.
        In other words, they should be created once and left unmodified by user
        interaction. -->
    <entity entity-name="TemporalExpression"
            package-name="org.apache.ofbiz.service.schedule"
            title="Temporal Expression">
      <field name="tempExprId" type="id-ne"></field>
      <field name="tempExprTypeId" type="id-ne"></field>
      <field name="description" type="description"></field>
      <field name="date1" type="date-time"></field>
      <field name="date2" type="date-time"></field>
      <field name="integer1" type="numeric"></field>
      <field name="integer2" type="numeric"></field>
      <field name="string1" type="id"></field>
      <field name="string2" type="id"></field>
      <prim-key field="tempExprId"/>
    </entity>

    <entity entity-name="TemporalExpressionAssoc"
            package-name="org.apache.ofbiz.service.schedule"
            title="Temporal Expression Association">
      <field name="fromTempExprId" type="id-ne"><description>The "parent" expression</description></field>
      <field name="toTempExprId" type="id-ne"><description>The "child" expression</description></field>
      <field name="exprAssocType" type="id"><description>Expression association type.
         When applied to DIFFERENCE expression types, valid values are INCLUDE or EXCLUDE.
         When applied to SUBSTITUTION expression types, valid values are INCLUDE, EXCLUDE, or SUBSTITUTE.
         </description>
      </field>
      <prim-key field="fromTempExprId"/>
      <prim-key field="toTempExprId"/>
      <relation type="one" fk-name="TEMP_EXPR_FROM" rel-entity-name="TemporalExpression" title="From">
        <key-map field-name="fromTempExprId" rel-field-name="tempExprId"/>
      </relation>
      <relation type="one" fk-name="TEMP_EXPR_TO" rel-entity-name="TemporalExpression" title="To">
        <key-map field-name="toTempExprId" rel-field-name="tempExprId"/>
      </relation>
    </entity>

    <view-entity entity-name="TemporalExpressionChild"
            package-name="org.apache.ofbiz.service.schedule"
            title="Temporal Expression Children View Entity">
      <member-entity entity-alias="TEA" entity-name="TemporalExpressionAssoc"/>
      <member-entity entity-alias="TE" entity-name="TemporalExpression"/>
      <alias-all entity-alias="TEA">
          <exclude field="toTempExprId"/>
      </alias-all>
      <alias-all entity-alias="TE"/>
      <view-link entity-alias="TEA" rel-entity-alias="TE">
        <key-map field-name="toTempExprId" rel-field-name="tempExprId"/>
      </view-link>
    </view-entity>

    <entity entity-name="JobManagerLock" package-name="org.apache.ofbiz.service.schedule" title="Lock Job Manager Scheduler">
        <field name="instanceId" type="id"/>
        <field name="fromDate" type="date-time"/>
        <field name="thruDate" type="date-time"/>
        <field name="reasonEnumId" type="id"/>
        <field name="comments" type="comment"/>
        <field name="createdDate" type="date-time"/>
        <field name="createdByUserLogin" type="id-vlong"/>
        <field name="lastModifiedDate" type="date-time"/>
        <field name="lastModifiedByUserLogin" type="id-vlong"/>
        <prim-key field="instanceId"/>
        <prim-key field="fromDate"/>
        <relation type="one" fk-name="JOBLK_ENUM_REAS" rel-entity-name="Enumeration" title="Reason">
            <key-map field-name="reasonEnumId" rel-field-name="enumId"/>
        </relation>
    </entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.service.semaphore -->
  <!-- ========================================================= -->
    <entity entity-name="ServiceSemaphore" package-name="org.apache.ofbiz.service.semaphore" title="Semaphore Lock Entity"
            sequence-bank-size="100">
        <field name="serviceName" type="name"></field>
        <field name="lockedByInstanceId" type="id"></field>
        <field name="lockThread" type="name"></field>
        <field name="lockTime" type="date-time"></field>
        <prim-key field="serviceName"/>
    </entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.webapp.visit -->
  <!-- ========================================================= -->

    <entity entity-name="BrowserType"
            package-name="org.apache.ofbiz.webapp.visit"
            title="Browser Type Entity">
      <field name="browserTypeId" type="id-ne"></field>
      <field name="browserName" type="name"></field>
      <field name="browserVersion" type="very-short"></field>
      <prim-key field="browserTypeId"/>
    </entity>
    <entity entity-name="PlatformType"
            package-name="org.apache.ofbiz.webapp.visit"
            title="Platform Type Entity">
      <field name="platformTypeId" type="id-ne"></field>
      <field name="platformName" type="name"></field>
      <field name="platformVersion" type="very-short"></field>
      <prim-key field="platformTypeId"/>
    </entity>
    <entity entity-name="ProtocolType"
            package-name="org.apache.ofbiz.webapp.visit"
            title="Protocol Type Entity">
      <field name="protocolTypeId" type="id-ne"></field>
      <field name="protocolName" type="name"></field>
      <prim-key field="protocolTypeId"/>
    </entity>
    <entity entity-name="ServerHit"
            package-name="org.apache.ofbiz.webapp.visit"
            never-cache="true"
            title="Server Hit Entity">
      <field name="visitId" type="id-ne"></field>
      <field name="contentId" type="id-vlong-ne"><!-- This is called contentId but has nothing to do with the Content entity in many cases. The value can vary. For example for the ControlServlet request it is "${webapp-name}.${request-map-name}" --></field>
      <field name="hitStartDateTime" type="date-time"></field>
      <field name="hitTypeId" type="id-ne"></field>
      <field name="numOfBytes" type="numeric"></field>
      <field name="runningTimeMillis" type="numeric"></field>
      <field name="userLoginId" type="id-vlong"></field>
      <field name="statusId" type="id"></field>
      <field name="requestUrl" type="url"></field>
      <field name="referrerUrl" type="url"></field>
      <field name="serverIpAddress" type="id"></field>
      <field name="serverHostName" type="long-varchar"></field>
      <prim-key field="visitId"/>
      <prim-key field="contentId"/>
      <prim-key field="hitStartDateTime"/>
      <prim-key field="hitTypeId"/>
      <relation type="one" fk-name="SERVER_HIT_SHTYP" rel-entity-name="ServerHitType">
        <key-map field-name="hitTypeId"/>
      </relation>
      <relation type="one" fk-name="SERVER_HIT_VISIT" rel-entity-name="Visit">
        <key-map field-name="visitId"/>
      </relation>
    </entity>
    <entity entity-name="ServerHitBin" package-name="org.apache.ofbiz.webapp.visit" never-cache="true" title="Server Hit Bin Entity">
      <field name="serverHitBinId" type="id-ne"></field>
      <field name="contentId" type="id-vlong-ne"></field>
      <field name="hitTypeId" type="id-ne"></field>
      <field name="serverIpAddress" type="id"></field>
      <field name="serverHostName" type="long-varchar"></field>
      <field name="binStartDateTime" type="date-time"></field>
      <field name="binEndDateTime" type="date-time"></field>
      <field name="numberHits" type="numeric"></field>
      <field name="totalTimeMillis" type="numeric"></field>
      <field name="minTimeMillis" type="numeric"></field>
      <field name="maxTimeMillis" type="numeric"></field>
      <prim-key field="serverHitBinId"/>
      <relation type="one" fk-name="SERVER_HBIN_TYPE" rel-entity-name="ServerHitType">
        <key-map field-name="hitTypeId"/>
      </relation>
    </entity>
    <entity entity-name="ServerHitType"
            package-name="org.apache.ofbiz.webapp.visit"
                        default-resource-name="WebappEntityLabels"
            title="Server Hit Bin Entity">
      <field name="hitTypeId" type="id"></field>
      <field name="description" type="description"></field>
      <prim-key field="hitTypeId"/>
    </entity>
    <entity entity-name="UserAgent"
            package-name="org.apache.ofbiz.webapp.visit"
            title="User Agent Entity">
      <field name="userAgentId" type="id-ne"></field>
      <field name="browserTypeId" type="id"></field>
      <field name="platformTypeId" type="id"></field>
      <field name="protocolTypeId" type="id"></field>
      <field name="userAgentTypeId" type="id"></field>
      <field name="userAgentMethodTypeId" type="id"></field>
      <prim-key field="userAgentId"/>
      <relation type="one" fk-name="UAGENT_BROWSER" rel-entity-name="BrowserType">
        <key-map field-name="browserTypeId"/>
      </relation>
      <relation type="one" fk-name="UAGENT_PLATFORM" rel-entity-name="PlatformType">
        <key-map field-name="platformTypeId"/>
      </relation>
      <relation type="one" fk-name="UAGENT_PROTOCOL" rel-entity-name="ProtocolType">
        <key-map field-name="protocolTypeId"/>
      </relation>
      <relation type="one" fk-name="UAGENT_TYPE" rel-entity-name="UserAgentType">
        <key-map field-name="userAgentTypeId"/>
      </relation>
      <relation type="one" fk-name="UAGENT_METHOD" rel-entity-name="UserAgentMethodType">
        <key-map field-name="userAgentMethodTypeId"/>
      </relation>
    </entity>
    <entity entity-name="UserAgentMethodType"
            package-name="org.apache.ofbiz.webapp.visit"
            title="User Agent Method Type Entity">
      <field name="userAgentMethodTypeId" type="id-ne"></field>
      <field name="description" type="description"></field>
      <prim-key field="userAgentMethodTypeId"/>
    </entity>
    <entity entity-name="UserAgentType"
            package-name="org.apache.ofbiz.webapp.visit"
            title="User Agent Type Entity">
      <field name="userAgentTypeId" type="id-ne"></field>
      <field name="description" type="description"></field>
      <prim-key field="userAgentTypeId"/>
    </entity>
    <entity entity-name="Visit" package-name="org.apache.ofbiz.webapp.visit" never-cache="true" title="Visit Entity"
        sequence-bank-size="100">
        <field name="visitId" type="id-ne"></field>
        <field name="visitorId" type="id"></field>
        <field name="userLoginId" type="id-vlong"></field>
        <field name="userCreated" type="indicator"></field>
        <field name="sessionId" type="id-vlong"></field>
        <field name="serverIpAddress" type="id"></field>
        <field name="serverHostName" type="long-varchar"></field>
        <field name="webappName" type="short-varchar"></field>
        <field name="initialLocale" type="short-varchar"></field>
        <field name="initialRequest" type="url"></field>
        <field name="initialReferrer" type="url"></field>
        <field name="initialUserAgent" type="long-varchar"></field>
        <field name="userAgentId" type="id"></field>
        <field name="clientIpAddress" type="short-varchar"></field>
        <field name="clientHostName" type="long-varchar"></field>
        <field name="clientUser" type="short-varchar"></field>
        <field name="clientIpIspName" type="short-varchar"></field>
        <field name="clientIpPostalCode" type="short-varchar"></field>
        <field name="cookie" type="short-varchar"></field>
        <field name="fromDate" type="date-time"></field>
        <field name="thruDate" type="date-time"></field>
        <prim-key field="visitId"/>
        <relation type="one" fk-name="VISIT_VISITOR" rel-entity-name="Visitor">
            <key-map field-name="visitorId"/>
        </relation>
        <relation type="one" fk-name="VISIT_USER_AGNT" rel-entity-name="UserAgent">
            <key-map field-name="userAgentId"/>
        </relation>
        <index name="VISIT_THRU_IDX" unique="false">
            <index-field name="thruDate"/>
        </index>
    </entity>
    <entity entity-name="Visitor" package-name="org.apache.ofbiz.webapp.visit" title="Visitor Entity"
        sequence-bank-size="100">
        <field name="visitorId" type="id-ne"></field>
        <field name="userLoginId" type="id-vlong"></field>
        <prim-key field="visitorId"/>
        <relation type="one" fk-name="VISITOR_USRLGN" rel-entity-name="UserLogin">
            <key-map field-name="userLoginId"/>
        </relation>
    </entity>

  <!-- ========================================================= -->
  <!-- org.apache.ofbiz.webapp.website -->
  <!-- ========================================================= -->

    <entity entity-name="WebPage"
            package-name="org.apache.ofbiz.webapp.website"
            title="Web Page Entity">
      <field name="webPageId" type="id-ne"></field>
      <field name="pageName" type="name"></field>
      <field name="webSiteId" type="id"></field>
      <prim-key field="webPageId"/>
      <relation type="one" fk-name="WEB_PAGE_SITE" rel-entity-name="WebSite">
        <key-map field-name="webSiteId"/>
      </relation>
    </entity>
    <entity entity-name="WebSite"
            package-name="org.apache.ofbiz.webapp.website"
            title="Web Site Entity">
      <field name="webSiteId" type="id-ne"></field>
      <field name="siteName" type="name"></field>
      <field name="httpHost" type="long-varchar"></field>
      <field name="httpPort" type="very-short"></field>
      <field name="httpsHost" type="long-varchar"></field>
      <field name="httpsPort" type="very-short"></field>
      <field name="enableHttps" type="indicator"></field>
      <field name="standardContentPrefix" type="url"></field>
      <field name="secureContentPrefix" type="url"></field>
      <field name="cookieDomain" type="long-varchar"></field>
      <field name="visualThemeSetId" type="id"></field>
      <prim-key field="webSiteId"/>
      <relation type="one" fk-name="WEB_SITE_THEME_SET" rel-entity-name="VisualThemeSet">
        <key-map field-name="visualThemeSetId"/>
      </relation>
    </entity>

    <!-- ========================================================= -->
    <!-- ======================== Data Model ===================== -->
    <!-- The modules in this file are as follows:                  -->
    <!--  - org.apache.ofbiz.entity.audit -->
    <!--  - org.apache.ofbiz.entity.crypto -->
    <!--  - org.apache.ofbiz.entity.sequence -->
    <!--  - org.apache.ofbiz.entity.tenant -->
    <!-- ========================================================= -->

    <entity entity-name="EntityAuditLog" package-name="org.apache.ofbiz.entity.audit" title="Entity Audit Log">
        <field name="auditHistorySeqId" type="id-ne"><description>Sequenced primary key</description></field>
        <field name="changedEntityName" type="long-varchar"></field>
        <field name="changedFieldName" type="long-varchar"></field>
        <field name="pkCombinedValueText" type="long-varchar"></field>
        <field name="oldValueText" type="long-varchar"></field>
        <field name="newValueText" type="long-varchar"></field>
        <field name="changedDate" type="date-time"></field>
        <field name="changedByInfo" type="long-varchar"><description>This should contain whatever information is available about the user or system that changed the value. This could be a userLoginId, but could be something else too, so there is no foreign key.</description></field>
        <field name="changedSessionInfo" type="long-varchar"><description>This should contain whatever information is available about the session during which the value was changed. This could be a visitId, but could be something else too, so there is no foreign key.</description></field>
        <prim-key field="auditHistorySeqId"/>
    </entity>
    <entity entity-name="EntityKeyStore" package-name="org.apache.ofbiz.entity.crypto" title="Entity Key Store Entity">
        <field name="keyName" type="id-vlong-ne"></field>
        <field name="keyText" type="long-varchar"></field>
        <prim-key field="keyName"/>
    </entity>
    <entity entity-name="SequenceValueItem" package-name="org.apache.ofbiz.entity.sequence" title="Sequence Value Item Entity">
      <field name="seqName" type="id-long-ne"></field>
      <field name="seqId" type="numeric"></field>
      <prim-key field="seqName"/>
    </entity>
    <entity entity-name="JavaResource" package-name="org.apache.ofbiz.entity" title="Java Resource">
        <field name="resourceName" type="id-vlong-ne" />
        <field name="resourceValue" type="byte-array" />
        <prim-key field="resourceName" />
    </entity>

    <!-- ========================================================= -->
    <!-- org.apache.ofbiz.entity.tenant -->
    <!-- ========================================================= -->
    
    <entity entity-name="Tenant" package-name="org.apache.ofbiz.entity.tenant">
        <field name="tenantId" type="id-ne"/>
        <field name="tenantName" type="name"/>
        <field name="initialPath" type="value"/>
        <field name="disabled" type="indicator"><description>Disabled if 'Y', defaults to 'N' (not disabled).</description></field>
        <prim-key field="tenantId"/>
    </entity>
    <entity entity-name="TenantDataSource" package-name="org.apache.ofbiz.entity.tenant">
        <description>
            There should be one record for each tenant and each group-map for the active delegator.
            The jdbc fields will override the datasource -> inline-jdbc values for the per-tenant delegator.
        </description>
        <field name="tenantId" type="id-ne"/>
        <field name="entityGroupName" type="name"/>
        <field name="jdbcUri" type="long-varchar"/>
        <field name="jdbcUsername" type="long-varchar"/>
        <field name="jdbcPassword" type="long-varchar">
            <!-- This field should probably be encrypted, but the encrypt=true attribute will not work in this case
            because different tenants will have different sets of encryption keys because the EntityKeyStore table is
            in the per-tenant database an not in the shared tenant control database, which causes different keys to
            be used for those logged in under different tenants, causing decryption errors unless you do all 
            TenantDataSource maintenance from only one tenant (or the non-tenant master db).
            
            The problem is that each tenant has their own encryption keys, and that is they way it should be since 
            having easy access to the encryption keys that other tenants are using would be bad, and not having access 
            to your own encryption keys would also be bad. Because of that we can't move the EntityKeyStore entity 
            into the tenant control database. If we encrypt this with the keys from one tenant then no one logged in 
            with another tenant database will be able to decrypt it, so we can't use the keys in the per-tenant 
            databases for this.
            
            Technically we don't have to encrypt the JDBC password, it often isn't encrypted in the configuration 
            files anyway. But it would be nice to encrypt it to protect other databases anyway, even if they are 
            probably on the same box and in the same database server instance.
            -->
        </field>
        <prim-key field="tenantId"/>
        <prim-key field="entityGroupName"/>
        <relation type="one" fk-name="TNTDTSRC_TNT" rel-entity-name="Tenant">
            <key-map field-name="tenantId"/>
        </relation>
    </entity>
    <entity entity-name="TenantKeyEncryptingKey" package-name="org.apache.ofbiz.entity.tenant">
        <description>
            There should be one record for each tenant and each group-map for the active delegator.
            The jdbc fields will override the datasource -> inline-jdbc values for the per-tenant delegator.
        </description>
        <field name="tenantId" type="id-ne"/>
        <field name="kekText" type="long-varchar"></field>
        <prim-key field="tenantId"/>
        <relation type="one" fk-name="TNTKEK_TNT" rel-entity-name="Tenant">
            <key-map field-name="tenantId"/>
        </relation>
    </entity>
    <!-- may be no reason for this entity, user is authenticated inside the tenant and this would only be useful to 
    get a list of tenants per user
    <entity entity-name="TenantUserLogin" package-name="org.apache.ofbiz.entity.tenant">
        <field name="tenantId" type="id-ne"/>
        <field name="userLoginId" type="id-vlong-ne"/>
        <field name="fromDate" type="date-time"/>
        <field name="thruDate" type="date-time"/>
        <prim-key field="tenantId"/>
        <prim-key field="userLoginId"/>
        <prim-key field="fromDate"/>
        <relation type="one" fk-name="TNTUSRLGN_TNT" rel-entity-name="Tenant">
            <key-map field-name="tenantId"/>
        </relation>
        <!- - NOTE: there is no FK to the UserLogin entity, which is in a higher-level component, and would normally be in a separate database - ->
    </entity>
    -->
    <entity entity-name="Component" package-name="org.apache.ofbiz.entity.tenant">
        <description>Component Entity</description>
        <field name="componentName" type="name"></field>
        <field name="rootLocation" type="description"></field>
        <prim-key field="componentName"/>
    </entity>
    <entity entity-name="TenantComponent" package-name="org.apache.ofbiz.entity.tenant">
        <description></description>
        <field name="tenantId" type="id-ne"></field>
        <field name="componentName" type="name"></field>
        <field name="sequenceNum" type="numeric"></field>
        <prim-key field="componentName"/>
        <prim-key field="tenantId"/>
        <relation type="one" fk-name="TNTCOMP_TNT" rel-entity-name="Tenant">
            <key-map field-name="tenantId"/>
        </relation>
        <relation type="one" fk-name="COMP_CNT" rel-entity-name="Component">
            <key-map field-name="componentName"/>
        </relation>
    </entity>
    <entity entity-name="TenantDomainName" package-name="org.apache.ofbiz.entity.tenant" 
            title="Tenant and its Domain Name">
        <field name="tenantId" type="id-ne"></field>
        <field name="domainName" type="long-varchar"></field>
        <prim-key field="domainName"/>
        <relation type="one" fk-name="TNNT_DMNAM" rel-entity-name="Tenant">
            <key-map field-name="tenantId"/>
        </relation>
    </entity>
</entitymodel>
